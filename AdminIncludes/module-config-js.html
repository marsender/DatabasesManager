{**********************************************************************************}
{*                                                                                *}
{*    DatabasesManager - A Thelia 2 databases manager module                      *}
{*    Copyright (C) 2015 Jérôme BILLIRAS                                          *}
{*                                                                                *}
{*    This file is part of DatabasesManager.                                      *}
{*                                                                                *}
{*    DatabasesManager is free software: you can redistribute it and/or modify    *}
{*    it under the terms of the GNU General Public License as published by        *}
{*    the Free Software Foundation, either version 3 of the License, or           *}
{*    any later version.                                                          *}
{*                                                                                *}
{*    DatabasesManager is distributed in the hope that it will be useful,         *}
{*    but WITHOUT ANY WARRANTY; without even the implied warranty of              *}
{*    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the               *}
{*    GNU General Public License for more details.                                *}
{*                                                                                *}
{*    You should have received a copy of the GNU General Public License           *}
{*    along with this program. If not, see <http://www.gnu.org/licenses/>.        *}
{*                                                                                *}
{**********************************************************************************}
<script type="application/javascript">
    $(function(){
        var databasesManagerConfigList, deleteValidButton;

        databasesManagerConfigList = $('#databases-manager-config-list');
        deleteValidButton = $('#databases-manager-delete-valid');

        databasesManagerConfigList.on('click', '[href="#delete-database-config-dialog"]', function(clickEvent){
            var clickedElement, modalBody;

            clickedElement = $(clickEvent.currentTarget);
            modalBody = $('#databases-manager-delete-modal-body');

            modalBody.html(modalBody.data('confirm-string').replace('%label', clickedElement.data('key')));
            deleteValidButton.data('key', clickedElement.data('key'));
        });

        deleteValidButton.click(function(){
            window.location.href = deleteValidButton.data('href').replace('%label', deleteValidButton.data('key'));
        });

        databasesManagerConfigList.on('click', '[href="#edit-database-config-dialog"]', function(clickEvent){
            var clickedElement, configData;

            clickedElement = $(clickEvent.currentTarget);
            configData = clickedElement.data('data');

            $('#edit-database-config-dialog').find('input').each(function(index, element){
                var key;

                element = $(element);
                key = element.prop('name').replace(/^databases_manager_configuration_form_edit\[(.*?)\]$/, '$1');

                if (configData[key]) {
                    element.val(configData[key]);
                }
            });
        });
    });
</script>