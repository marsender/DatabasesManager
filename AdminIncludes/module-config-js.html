<script type="application/javascript">
    $(function(){
        var databasesManagerConfigList, deleteValidButton;

        databasesManagerConfigList = $('#databases-manager-config-list');
        deleteValidButton = $('#databases-manager-delete-valid');

        databasesManagerConfigList.on('click', '[href="#delete-database-config-dialog"]', function(clickEvent){
            var clickedElement, modalBody;

            clickedElement = $(clickEvent.currentTarget);
            modalBody = $('#databases-manager-delete-modal-body');

            modalBody.html(modalBody.data('confirm-string').replace('%label', clickedElement.data('key')));
            deleteValidButton.data('key', clickedElement.data('key'));
        });

        deleteValidButton.click(function(){
            window.location.href = deleteValidButton.data('href').replace('%label', deleteValidButton.data('key'));
        });

        databasesManagerConfigList.on('click', '[href="#edit-database-config-dialog"]', function(clickEvent){
            var clickedElement, configData;

            clickedElement = $(clickEvent.currentTarget);
            configData = clickedElement.data('data');

            $('#edit-database-config-dialog').find('input').each(function(index, element){
                var key;

                element = $(element);
                key = element.prop('name').replace(/^databases_manager_configuration_form_edit\[(.*?)\]$/, '$1');

                if (configData[key]) {
                    element.val(configData[key]);
                }
            });
        });
    });
</script>